(function(_ds){var window=this;var aqa=function(a){let b=a,c;return function(){if(b){const d=b;b=void 0;c=d.apply(this,arguments)}return c}};var p4=function(a,b,c){return a.j.then(function(d){const e=d[b];if(!e)throw Error(`Method not found: ${b}`);return e.apply(d,c)})},bqa=class{constructor(a){this.j=a;a.then((0,_ds.sh)(function(){},this),()=>{},this)}},cqa=function(a,b,c){const d=Array(arguments.length-2);for(var e=2;e<arguments.length;e++)d[e-2]=arguments[e];e=q4(a,b).then(f=>f.apply(null,d),f=>{f=Error(`Help service failed to load serviceFactory: ${b} from serviceUrl:${a}`,{cause:f});delete r4[b];return _ds.Wo(f)});return new bqa(e)},
r4={},q4=function(a,b){var c=r4[b];if(c)return c;c=(c=_ds.Mh(b))?_ds.Vo(c):(new _ds.Ro(function(d,e){const f=(new _ds.Ul(document)).createElement("SCRIPT");f.async=!0;_ds.hg(f,_ds.Nf(_ds.El(a)));f.onload=f.onreadystatechange=function(){f.readyState&&f.readyState!="loaded"&&f.readyState!="complete"||d()};f.onerror=g=>{e(Error(`Could not load ${b} Help API from ${a}`,{cause:g}))};(document.head||document.getElementsByTagName("head")[0]).appendChild(f)})).then(function(){const d=_ds.Mh(b);if(!d)throw Error(`Failed to load ${b} from ${a}`);
return d});return r4[b]=c};var dqa={GOOGLE:"https://www.google.com",WJ:"https://support.google.com",sJ:"https://play.google.com"},eqa=async function(a){for(const b of Object.values(dqa))try{(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:b})).state!=="granted"&&a.j.push(b)}catch(c){break}};(new class{constructor(){this.j=[];this.m=[];this.ma=aqa(async()=>{if(typeof document==="undefined"||document.requestStorageAccessFor===void 0||navigator.permissions===void 0||navigator.permissions.query===void 0||location.hostname.match(".+\\.google\\.com$"))return Promise.resolve();await eqa(this);this.j.length>0&&document.addEventListener("click",this.o)});this.o=()=>{if(!(this.m.length>0)){for(const a of this.j)try{this.m.push(document.requestStorageAccessFor(a))}catch(b){}Promise.all(this.m).then(()=>
{}).catch(()=>{}).finally(()=>{this.reset()})}}}reset(){document.removeEventListener("click",this.o)}}).ma();var fqa=class{constructor(a){this.j=a}ma(a){p4(this.j,"requestSurvey",arguments).ea(()=>{},this)}o(a){p4(this.j,"presentSurvey",arguments).ea(()=>{},this)}m(a){p4(this.j,"dismissSurvey",arguments).ea(()=>{},this)}},s4=_ds.Fl("https://www.gstatic.com/feedback/js/help/prod/service/lazy.min.js");q4(s4,"help.service.Lazy.create").ea(()=>{});var t4=function(){return"devsite-hats-survey"},x4=function(){if(u4){let a;(a=v4)==null||a.m({surveyMetadata:{sessionId:u4}});return w4.promise}return Promise.resolve()},gqa=async function(a){var b=await _ds.t(),c=b.getConfig();var d=_ds.z(c,18);(c=a.getAttribute("listnr-id"))?(b={locale:b.getLocale()||"en",apiKey:d},b=cqa(s4,"help.service.Lazy.create",c,{apiKey:b.apiKey||b.apiKey,asxUiUri:b.asxUiUri||b.asxUiUri,environment:b.environment||b.environment,flow:b.flow||b.flow,frdProductData:b.frdProductData||
b.frdProductData,frdProductDataSerializedJspb:b.ZK||b.frdProductDataSerializedJspb,helpCenterPath:b.helpCenterPath||b.helpCenterPath,locale:b.locale||b.locale||"en".replace(/-/g,"_"),nonce:b.nonce||b.nonce,productData:b.productData||b.productData,receiverUri:b.receiverUri||b.receiverUri,renderApiUri:b.renderApiUri||b.renderApiUri,theme:b.theme||b.theme,window:b.window||b.window}),v4=new fqa(b),a.j=v4):console.warn('<devsite-hats-survey> missing attribute "listnr-id"')},hqa=function(a,b){let c;(c=
a.j)==null||c.o({productData:{customData:{pageUrl:_ds.E().toString()}},surveyData:b,colorScheme:1,authuser:0,customZIndex:1E4,listener:{surveyPrompted:d=>{u4=d.sessionId||null;w4=new _ds.ih;y4=w4.resolve},surveyClosed:()=>{u4=z4=null;y4()}}})},B4=class extends _ds.C{constructor(a){super();this.j=null;a&&(this.j=v4=a)}async connectedCallback(){z4=this;const a=this.getAttribute("hats-id");a&&a!==A4&&(await x4(),this.j||await gqa(this),A4=a,await this.Cj(a))}disconnectedCallback(){z4=null;_ds.np(iqa,
document.body,"devsite-page-changed",()=>{z4||(x4(),A4=null)})}async Cj(a){await _ds.t();let b;(b=this.j)==null||b.ma({triggerId:a,callback:c=>{c.surveyData&&hqa(this,c.surveyData)},authuser:0,enableTestingMode:!1})}};B4.prototype.renderSurvey=B4.prototype.Cj;B4.prototype.disconnectedCallback=B4.prototype.disconnectedCallback;B4.prototype.connectedCallback=B4.prototype.connectedCallback;B4.closeCurrentSurvey=x4;B4.getTagName=t4;
var A4=null,u4=null,z4=null,w4=new _ds.ih,y4=w4.resolve,iqa=new _ds.F,v4=void 0;try{customElements.define(t4(),B4)}catch(a){console.warn("devsite.app.customElement.DevsiteHatsSurvey",a)};})(_ds_www);
